<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adviser</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Loading splash -->
<div id="loading">
  <div class="loading-icon">‚óà</div>
  <div class="loading-text">CARGANDO ADVISER...</div>
</div>

<div id="app">

  <!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <aside id="sidebar">
    <div class="sidebar-logo">
      <div class="logo-icon">A</div>
      <div class="logo-text">
        <h1>Adviser</h1>
        <span>Asistente de rutina</span>
      </div>
    </div>

    <div class="nav-section">
      <div class="nav-label">// navegaci√≥n</div>
      <button class="nav-btn active" data-panel="rutina">
        <span class="nav-icon">‚ó´</span> Ver Rutina
      </button>
      <button class="nav-btn" data-panel="editar">
        <span class="nav-icon">‚ú¶</span> Editar
      </button>
      <button class="nav-btn" data-panel="cronometro">
        <span class="nav-icon">‚óé</span> Cron√≥metro
      </button>
      <button class="nav-btn" data-panel="config">
        <span class="nav-icon">‚öô</span> Configuraci√≥n
      </button>
    </div>

    <div class="sidebar-spacer"></div>

    <div style="padding: 0 12px; margin-bottom: 4px;">
      <div class="nav-label" style="padding: 0 0 6px 4px;">// asistente</div>
    </div>

    <div class="assistant-block">
      <div class="assistant-status">
        <div class="status-dot" id="status-dot"></div>
        <span class="status-text" id="status-text">Detenido</span>
        <span class="status-time" id="status-time">--:--</span>
      </div>
      <button id="btn-toggle" onclick="toggleAsistente()">‚ñ∂ Iniciar asistente</button>
    </div>

    <div style="height: 16px;"></div>
  </aside>

  <!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main id="main">

    <!-- Panel: Ver Rutina -->
    <div class="panel active" id="panel-rutina">
      <div class="panel-header">
        <h2>Rutina semanal</h2>
        <p id="fecha-str">Cargando...</p>
      </div>
      <div class="day-selector" id="day-selector"></div>
      <div class="hours-list" id="hours-list"></div>
    </div>

    <!-- Panel: Editar -->
    <div class="panel" id="panel-editar">
      <div class="panel-header">
        <h2>Editar rutina</h2>
        <p>Modific√° los t√≠tulos y mensajes para cada hora del d√≠a</p>
      </div>
      <div class="edit-day-bar">
        <span class="edit-day-label">D√çA ‚Üí</span>
        <select class="edit-day-select" id="edit-day-select" onchange="onEditDiaChange(this.value)">
          <option value="lunes">Lunes</option>
          <option value="martes">Martes</option>
          <option value="miercoles">Mi√©rcoles</option>
          <option value="jueves">Jueves</option>
          <option value="viernes">Viernes</option>
          <option value="sabado">S√°bado</option>
          <option value="domingo">Domingo</option>
        </select>
      </div>
      <div class="hours-list" id="edit-list"></div>
      <div class="save-bar">
        <button class="btn-save" onclick="guardarDia()">‚óà Guardar cambios</button>
      </div>
    </div>

    <!-- Panel: Cron√≥metro de tareas -->
    <div class="panel" id="panel-cronometro">
      <div class="panel-header">
        <h2>Cron√≥metro de tareas</h2>
        <p>Tareas urgentes fuera de tu rutina habitual</p>
      </div>

      <!-- Vista SETUP (antes de iniciar) -->
      <div id="crono-setup">
        <!-- Tiempo l√≠mite -->
        <div class="crono-section">
          <div class="crono-section-label">// tiempo l√≠mite</div>
          <div class="crono-time-selector">
            <button class="crono-time-btn active" data-min="15">15 min</button>
            <button class="crono-time-btn" data-min="30">30 min</button>
            <button class="crono-time-btn" data-min="45">45 min</button>
            <button class="crono-time-btn" data-min="60">1 hora</button>
            <button class="crono-time-btn" data-min="90">1h 30m</button>
            <button class="crono-time-btn" data-min="120">2 horas</button>
          </div>
          <div class="crono-custom-row">
            <span class="crono-custom-label">Tiempo personalizado:</span>
            <input type="number" id="crono-custom-min" class="crono-custom-input" placeholder="min" min="1" max="999">
            <button class="crono-custom-set" onclick="setTiempoCustom()">‚Üí Aplicar</button>
          </div>
          <div class="crono-tiempo-selected">
            Tiempo seleccionado: <span id="crono-tiempo-label" class="accent">15 minutos</span>
          </div>
        </div>

        <!-- Agregar tareas -->
        <div class="crono-section">
          <div class="crono-section-label">// agregar tareas</div>
          <div class="crono-add-row">
            <input type="text" id="crono-nueva-tarea" class="crono-task-input" placeholder="Describ√≠ la tarea..." maxlength="120" onkeydown="if(event.key==='Enter') agregarTareaSetup()">
            <button class="crono-add-btn" onclick="agregarTareaSetup()">+ Agregar</button>
          </div>
          <div id="crono-setup-lista" class="crono-setup-lista">
            <div class="crono-empty-hint">A√∫n no hay tareas. Agreg√° al menos una para comenzar.</div>
          </div>
        </div>

        <!-- Bot√≥n iniciar -->
        <div class="crono-start-bar">
          <button class="btn-crono-start" id="btn-crono-start" onclick="iniciarCronometro()" disabled>
            ‚ñ∂ Iniciar sesi√≥n
          </button>
        </div>
      </div>

      <!-- Vista RUNNING (cron√≥metro activo) -->
      <div id="crono-running" style="display:none; flex-direction:column; flex:1; overflow:hidden;">

        <!-- Display del tiempo -->
        <div class="crono-display-wrap">
          <div class="crono-ring-container">
            <svg class="crono-ring-svg" viewBox="0 0 120 120">
              <circle class="crono-ring-bg" cx="60" cy="60" r="52"/>
              <circle class="crono-ring-fill" id="crono-ring-fill" cx="60" cy="60" r="52"/>
            </svg>
            <div class="crono-time-display" id="crono-time-display">00:00</div>
          </div>
          <div class="crono-session-info">
            <div class="crono-tasks-counter">
              <span id="crono-done-count">0</span> / <span id="crono-total-count">0</span>
              <span class="crono-tasks-label">tareas completadas</span>
            </div>
            <div class="crono-progress-bar-wrap">
              <div class="crono-progress-bar" id="crono-progress-bar" style="width:0%"></div>
            </div>
          </div>
        </div>

        <!-- Lista de tareas activa (scrollable) -->
        <div class="crono-running-lista-wrap">
          <div class="crono-section-label" style="padding: 0 32px; margin-bottom:8px;">// tareas de la sesi√≥n</div>
          <!-- Agregar tarea mientras corre -->
          <div class="crono-add-row crono-add-row-running">
            <input type="text" id="crono-nueva-tarea-running" class="crono-task-input" placeholder="Agregar tarea en curso..." maxlength="120" onkeydown="if(event.key==='Enter') agregarTareaRunning()">
            <button class="crono-add-btn" onclick="agregarTareaRunning()">+</button>
          </div>
          <div id="crono-running-lista" class="crono-running-lista"></div>
        </div>

        <!-- Barra inferior de acciones -->
        <div class="crono-action-bar">
          <button class="btn-crono-finish" id="btn-crono-finish" onclick="finalizarSesion()" disabled>
            ‚úì Finalizar sesi√≥n
          </button>
          <button class="btn-crono-cancel" onclick="cancelarSesion()">
            ‚úï Cancelar
          </button>
        </div>
      </div>

      <!-- Vista RESUMEN (al finalizar) -->
      <div id="crono-resumen" style="display:none; flex-direction:column; flex:1; overflow:hidden;">
        <div class="crono-resumen-content">
          <div class="crono-resumen-icon" id="crono-resumen-icon">‚úì</div>
          <div class="crono-resumen-titulo" id="crono-resumen-titulo">¬°Sesi√≥n completada!</div>
          <div class="crono-resumen-sub" id="crono-resumen-sub">Completaste todas las tareas.</div>
          <div class="crono-resumen-stats" id="crono-resumen-stats"></div>
          <button class="btn-crono-nueva" onclick="nuevaSesion()">‚óà Nueva sesi√≥n</button>
        </div>
      </div>

    </div><!-- /panel-cronometro -->

    <!-- Panel: Config -->
    <div class="panel" id="panel-config">
      <div class="panel-header">
        <h2>Configuraci√≥n</h2>
        <p>Ajustes de la aplicaci√≥n</p>
      </div>

      <div class="config-section" style="margin-top:20px;">
        <div class="config-label">// apariencia</div>
        <div class="config-card">
          <div class="config-row">
            <span class="config-row-icon">üé®</span>
            <div class="config-row-text">
              <strong>Tema oscuro</strong>
              <span>Actualmente: <span id="tema-badge" class="accent">Oscuro</span></span>
            </div>
            <label class="toggle">
              <input type="checkbox" id="tema-toggle" checked onchange="onTemaChange(this.checked)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>

      <div class="config-section" style="margin-top:20px;">
        <div class="config-label">// acerca de</div>
        <div class="about-grid">
          <div class="about-cell">
            <span>aplicaci√≥n</span>
            <strong class="accent">Adviser</strong>
          </div>
          <div class="about-cell">
            <span>versi√≥n</span>
            <strong>v2.0</strong>
          </div>
          <div class="about-cell">
            <span>motor</span>
            <strong>pywebview</strong>
          </div>
          <div class="about-cell">
            <span>plataforma</span>
            <strong>Windows</strong>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- Toast de confirmaci√≥n -->
<div id="toast"></div>

<!-- Overlay de alarma -->
<div id="alarm-overlay" style="display:none;">
  <div class="alarm-box">
    <div class="alarm-icon">‚è∞</div>
    <div class="alarm-titulo">¬°Tiempo agotado!</div>
    <div class="alarm-sub">No completaste todas las tareas en el tiempo l√≠mite.</div>
    <button class="alarm-btn" onclick="cerrarAlarma()">Entendido</button>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
